@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@100;200;300;400;500;600;700;800;900&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    direction: rtl;
    box-sizing: border-box;
  }
  
  html {
    font-size: 14px;
  }
  
  body {
    font-family: 'Noto Sans Hebrew', 'Roboto', 'Helvetica Neue', sans-serif;
    direction: rtl;
    margin: 0;
    padding: 0;
    background: #e5ddd5;
    overflow-x: hidden;
  }
  
  input, textarea {
    direction: rtl;
    font-family: 'Noto Sans Hebrew', 'Roboto', sans-serif;
  }
}

@layer components {
  /* Exact WhatsApp Background */
  .whatsapp-background {
    background-color: #e5ddd5;
    background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='0.04'%3E%3Cpath d='M20 20c0 11.046-8.954 20-20 20s-20-8.954-20-20 8.954-20 20-20 20 8.954 20 20zm-2 0c0-9.941-8.059-18-18-18s-18 8.059-18 18 8.059 18 18 18 18-8.059 18-18z'/%3E%3C/g%3E%3C/svg%3E");
    min-height: 100vh;
  }

  .chat-background {
    background: linear-gradient(to bottom, #e5ddd5 0%, #e5ddd5 100%);
    background-image: 
      url("data:image/svg+xml,%3Csvg width='260' height='260' viewBox='0 0 260 260' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23ffffff' stroke-width='1' stroke-opacity='0.03'%3E%3Cpath d='M130 130m-125 0a125,125 0 1,0 250,0a125,125 0 1,0 -250,0'/%3E%3C/g%3E%3C/svg%3E"),
      url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M20 20c0 11.046-8.954 20-20 20s-20-8.954-20-20 8.954-20 20-20 20 8.954 20 20zm-2 0c0-9.941-8.059-18-18-18s-18 8.059-18 18 8.059 18 18 18 18-8.059 18-18z'/%3E%3C/g%3E%3C/svg%3E");
    position: relative;
    overflow: hidden;
  }

  /* Message Bubbles - Exact WhatsApp styling */
  .message-container {
    @apply flex items-end gap-2 mb-1;
    max-width: 100%;
    animation: messageSlideIn 0.15s ease-out;
  }

  .message-bubble {
    @apply relative px-2 py-1 text-sm;
    max-width: min(80vw, 450px);
    word-wrap: break-word;
    overflow-wrap: break-word;
    font-size: 14px;
    line-height: 19px;
    position: relative;
  }

  .message-bubble-user {
    background: #dcf8c6;
    color: #303030;
    border-radius: 7.5px 7.5px 7.5px 0px;
    margin-left: 50px;
    margin-right: 8px;
    box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
  }

  .message-bubble-ai {
    background: #ffffff;
    color: #303030;
    border-radius: 7.5px 7.5px 0px 7.5px;
    margin-right: 50px;
    margin-left: 8px;
    box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
  }

  .message-content {
    padding: 6px 7px 8px 9px;
    display: block;
  }

  .message-timestamp {
    font-size: 11px;
    color: rgba(0, 0, 0, 0.45);
    float: left;
    margin-top: 4px;
    margin-bottom: -4px;
  }

  .message-bubble-user .message-timestamp {
    color: rgba(0, 0, 0, 0.45);
  }

  /* Avatar - smaller like WhatsApp */
  .message-avatar {
    @apply w-8 h-8 rounded-full flex items-center justify-center text-xs flex-shrink-0;
    background: linear-gradient(135deg, #128c7e, #075e54);
    color: white;
    font-size: 11px;
    font-weight: 500;
  }

  .avatar-ai {
    background: linear-gradient(135deg, #4fc3f7, #29b6f6);
  }

  /* Typing Indicator - exact WhatsApp style */
  .typing-indicator {
    @apply flex items-center gap-2;
    padding: 8px 12px;
    background: #ffffff;
    border-radius: 7.5px 7.5px 0px 7.5px;
    margin-right: 50px;
    margin-left: 8px;
    box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
    animation: fadeIn 0.2s ease-in;
  }

  .typing-dots {
    @apply flex gap-1 items-center;
  }

  .typing-dot {
    width: 8px;
    height: 8px;
    background: #b3b3b3;
    border-radius: 50%;
    animation: typingDots 1.4s infinite ease-in-out;
  }

  .typing-dot:nth-child(1) { animation-delay: -0.32s; }
  .typing-dot:nth-child(2) { animation-delay: -0.16s; }
  .typing-dot:nth-child(3) { animation-delay: 0s; }

  /* Chat Input - exact WhatsApp style */
  .chat-input-container {
    background: #f0f0f0;
    border-top: 1px solid #e0e0e0;
    padding: 10px;
  }

  .chat-input-wrapper {
    @apply flex items-end gap-5 max-w-4xl mx-auto;
  }

  .chat-input-field {
    @apply flex-1 flex items-end bg-white rounded-full;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
    min-height: 40px;
    max-height: 100px;
  }

  .chat-input {
    @apply flex-1 bg-transparent border-0 px-4 py-2 text-gray-900 placeholder-gray-500 resize-none;
    min-height: 40px;
    max-height: 100px;
    font-size: 15px;
    line-height: 20px;
    font-family: 'Noto Sans Hebrew', 'Roboto', sans-serif;
  }

  .chat-input:focus {
    @apply outline-none;
  }

  .input-icons {
    @apply flex items-center gap-2 px-2;
  }

  .input-icon {
    @apply text-gray-500 hover:text-gray-600 transition-colors p-1;
    cursor: pointer;
  }

  .send-button {
    @apply w-10 h-10 bg-[#128c7e] text-white rounded-full flex items-center justify-center transition-all duration-150 hover:bg-[#075e54];
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  .mic-button {
    @apply w-10 h-10 bg-[#128c7e] text-white rounded-full flex items-center justify-center hover:bg-[#075e54] transition-colors;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  /* Header - exact WhatsApp green */
  .chat-header {
    background: #128c7e;
    padding: 10px 16px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
  }

  .chat-header-content {
    @apply flex items-center gap-3 max-w-4xl mx-auto;
  }

  .header-avatar {
    @apply w-10 h-10 rounded-full flex items-center justify-center;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    font-size: 16px;
  }

  .header-info h3 {
    @apply text-white font-normal text-base m-0;
    font-size: 16px;
    line-height: 21px;
  }

  .header-info p {
    @apply text-white/80 text-xs m-0;
    font-size: 13px;
    line-height: 18px;
  }

  .back-button {
    @apply text-white hover:text-white/80 transition-colors p-1;
  }

  /* Glass effect for scenario cards */
  .glass-card {
    @apply bg-white/95 backdrop-blur-sm border border-gray-200 rounded-xl;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  }

  /* Animations */
  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(8px) scale(0.98);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes typingDots {
    0%, 80%, 100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1.1);
      opacity: 1;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(3px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Scrollbar - WhatsApp style */
  .chat-messages::-webkit-scrollbar {
    width: 6px;
  }

  .chat-messages::-webkit-scrollbar-track {
    background: transparent;
  }

  .chat-messages::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
  }

  .chat-messages::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }

  /* Status indicators */
  .online-indicator {
    @apply absolute -bottom-1 -right-1 w-3 h-3 bg-[#4fc3f7] rounded-full border-2 border-white;
  }

  /* Message status */
  .message-status {
    @apply inline-flex items-center gap-1 text-xs;
    margin-left: 4px;
    margin-top: 2px;
  }

  .message-tick {
    width: 12px;
    height: 12px;
    color: rgba(0, 0, 0, 0.45);
  }

  /* Big screen optimizations for presentations */
  @media (min-width: 1200px) {
    html {
      font-size: 16px;
    }
    
    .message-bubble {
      font-size: 15px;
      line-height: 20px;
      max-width: min(70vw, 600px);
    }
    
    .message-content {
      padding: 8px 9px 10px 11px;
    }
    
    .message-container {
      margin-bottom: 2px;
    }
    
    .message-avatar {
      width: 36px;
      height: 36px;
      font-size: 12px;
    }
    
    .chat-input {
      font-size: 16px;
      min-height: 44px;
    }
    
    .send-button, .mic-button {
      width: 44px;
      height: 44px;
    }
    
    .header-avatar {
      width: 44px;
      height: 44px;
      font-size: 18px;
    }
    
    .header-info h3 {
      font-size: 18px;
    }
    
    .header-info p {
      font-size: 14px;
    }
    
    .chat-header {
      padding: 12px 20px;
    }
    
    .chat-input-container {
      padding: 12px 20px;
    }
  }

  /* Mobile adjustments */
  @media (max-width: 768px) {
    .message-bubble {
      max-width: min(85vw, 300px);
    }
    
    .message-bubble-user {
      margin-left: 40px;
    }
    
    .message-bubble-ai, .typing-indicator {
      margin-right: 40px;
    }
  }
}